@using Rsp.Portal.Application.Constants
@using Rsp.Portal.Application.DTOs.Responses.CmsContent
@model ProjectClosuresModel
@inject IHttpContextAccessor httpContextAccessor
@{
    ViewBag.Title = (string?)ViewData[PageContentElements.MetaTitle];

    var pageContentData = (Dictionary<string, MixedContentPageItem?>?)ViewData[PageContentElements.PageContent];
    var pageContent = pageContentData != null
        ? pageContentData
        : new Dictionary<string, MixedContentPageItem?>();

    var status = Context.Request.Query["status"].ToString();
    var projectRecordId = Context.Request.Query["id"].ToString();

    var title = pageContent.GetValueOrDefault("Application.CloseProject.WarningTitle", null);
    var warningMessage = pageContent.GetValueOrDefault("Application.CloseProject.WarningMessage", null);
    var pendingClosureTitle = pageContent.GetValueOrDefault("Application.CloseProject.BodyContent", null);
    var pendingClosureBody = pageContent.GetValueOrDefault("Application.CloseProject.BodyContent", null);
    var closedStatusTitle = pageContent.GetValueOrDefault("Application.CloseProject.BodyContent", null);
    var closedStatusBody = pageContent.GetValueOrDefault("Application.CloseProject.BodyContent", null);
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">

        @switch (status)
        {
            case ProjectRecordStatus.Active:
                <h1 class="govuk-heading-l">@Html.Raw(title)</h1>
                break;

            case ProjectRecordStatus.PendingClosure:
                <h1 class="govuk-heading-l">@Html.Raw(pendingClosureTitle)</h1>
                break;

            case ProjectRecordStatus.Closed:
                <h1 class="govuk-heading-l">@Html.Raw(closedStatusTitle)</h1>
                break;
        }

        <dl class="govuk-summary-list">
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">IRAS ID</dt>
                <dd class="govuk-summary-list__value">@Model.IrasId</dd>
            </div>
            <div class="govuk-summary-list__row">
                <dt class="govuk-summary-list__key">Short project title</dt>
                <dd class="govuk-summary-list__value">@Model.ShortProjectTitle</dd>
            </div>
        </dl>
        <p class="govuk-body">
            @switch (status)
            {
                case ProjectRecordStatus.Active:
                    @Html.Raw(warningMessage?.Value)
                    break;

                case ProjectRecordStatus.PendingClosure:
                    @Html.Raw(pendingClosureBody)
                    break;

                case ProjectRecordStatus.Closed:
                    @Html.Raw(closedStatusBody)
                    break;
            }
        </p>

        <div class="save-buttons">
            <a class="govuk-button" asp-route="pov:postapproval" asp-route-projectRecordId="@Model.ProjectRecordId">
                Return to project overview
            </a>
        </div>
    </div>
</div>