@using Rsp.Portal.Application.Constants
@using Rsp.Portal.Application.DTOs.Responses.CmsContent
@using Rsp.Portal.Web.Features.Modifications.Models
@model ReviewOutcomeViewModel
@{
    ViewBag.Title = "Withdraw modification";

    var modificationParams = new Dictionary<string, string>
    {
        { "projectRecordId", Model.ModificationDetails.ProjectRecordId },
        { "irasId", Model.ModificationDetails.IrasId },
        { "shortTitle", Model.ModificationDetails.ShortTitle ?? string.Empty },
        { "projectModificationId", Model.ModificationDetails.ModificationId ?? string.Empty },
        { "projectModificationIdentifier", Model.ModificationDetails.ModificationIdentifier ?? string.Empty }
    };

    var pageContentData = (Dictionary<string, MixedContentPageItem?>?)ViewData[PageContentElements.PageContent];
    var pageContent = pageContentData != null
        ? pageContentData
        : new Dictionary<string, MixedContentPageItem?>();

	var headline = pageContent.GetValueOrDefault("Modifications.WithdrawModification.Title", null);
	var body = pageContent.GetValueOrDefault("Modifications.WithdrawModification.Body", null);
}

@section BackNavigation {
    @{
        <partial name="_BackNavigation" model="@("pmc:reviewallchanges", "Back", modificationParams)"/>
    }
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <h2 class="govuk-heading-l">@Html.Raw(headline?.Value) @Model.ModificationDetails.ModificationIdentifier</h2>
        <p class="govuk-body">@Html.Raw(body?.Value)</p>
        <form method="post">
			<input type="hidden" name="ProjectModificationId" value="@Model.ModificationDetails.ModificationId" />
			<input type="hidden" name="ProjectRecordId" value="@Model.ModificationDetails.ProjectRecordId" />
			<button asp-route="pmc:confirmwithdrawmodification" type="submit" class="govuk-button govuk-button--warning" data-module="govuk-button">
                Confirm
            </button>
        </form>
    </div>
</div>