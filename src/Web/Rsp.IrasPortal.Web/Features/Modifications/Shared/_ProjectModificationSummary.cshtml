@using Mapster;
@using Rsp.IrasPortal.Web.Extensions
@using Rsp.IrasPortal.Application.Constants
@model dynamic

@{
    var modificationBaseModel = new BaseProjectModificationViewModel();

    if (Model is BaseProjectModificationViewModel viewModel)
    {
        modificationBaseModel = viewModel.Adapt<BaseProjectModificationViewModel>();
    }
    else
    {
        modificationBaseModel = TempData.PopulateBaseProjectModificationProperties(modificationBaseModel);
    }
}

<dl class="govuk-summary-list">
    <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">IRAS ID</dt>
        <dd class="govuk-summary-list__value">@modificationBaseModel.IrasId</dd>
    </div>
    <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Short project title</dt>
        <dd class="govuk-summary-list__value">@modificationBaseModel.ShortTitle</dd>
    </div>
    <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Modification ID</dt>
        <dd class="govuk-summary-list__value">@modificationBaseModel.ModificationIdentifier</dd>
    </div>
    <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">Audit</dt>
        <dd class="govuk-summary-list__value">
            <a 
                asp-route="pmc:audittrail"
                asp-route-modificationId="@modificationBaseModel.ModificationId"
                asp-route-shortTitle="@modificationBaseModel.ShortTitle"
                asp-route-modificationIdentifier="@modificationBaseModel.ModificationIdentifier"
                class="govuk-link"
            >
                View modification audit history
            </a>
        </dd>
    </div>

    @if (ViewData[ViewDataKeys.ShowModificationStatus] is true)
    {
        <div class="govuk-summary-list__row">
            <dt class="govuk-summary-list__key">Status</dt>
            <dd class="govuk-summary-list__value">@modificationBaseModel.Status</dd>
        </div>
    }
</dl>