@using Rsp.Portal.Application.Constants
@using Rsp.Portal.Application.DTOs.Responses.CmsContent
@model Rsp.Portal.Web.Features.SponsorWorkspace.Authorisation.Models.AuthoriseProjectClosuresOutcomeViewModel

@{
    string heading;
    string messageText;

    var pageContentData = (Dictionary<string, MixedContentPageItem?>?)ViewData[PageContentElements.PageContent];
    var pageContent = pageContentData != null
        ? pageContentData
        : new Dictionary<string, MixedContentPageItem?>();    

    var authorisedHeader = pageContent.GetValueOrDefault("SponsorWorkspace.ProjectClosureConfirmation.AuthorisedHeader", null);
    var authorisedMessage = pageContent.GetValueOrDefault("SponsorWorkspace.ProjectClosureConfirmation.AuthorisedMessage", null);

    var notAuthorisedHeader = pageContent.GetValueOrDefault("SponsorWorkspace.ProjectClosureConfirmation.NotAuthorisedHeader", null);
    var notAuthorisedMessage = pageContent.GetValueOrDefault("SponsorWorkspace.ProjectClosureConfirmation.NotAuthorisedMessage", null);

    if (Model.Outcome == "Authorised")
    {
        heading = authorisedHeader?.Value;
        messageText = authorisedMessage?.Value;
    }
    else
    {
        heading = notAuthorisedHeader?.Value;
        messageText = notAuthorisedMessage?.Value;
    }
}

<div class="govuk-grid-row">
    <div class="govuk-grid-column-two-thirds">
        <div class="govuk-panel govuk-panel--confirmation">
            <h1 class="govuk-panel__title">                
                @Html.Raw(heading)
            </h1>
        </div>
        <h2 class="govuk-heading-m">
            What happens next
        </h2>

        <p class="govuk-body">            
            @Html.Raw(messageText)
        </p>

        <form asp-route="sws:projectclosures" method="get">
            <input type="hidden" name="SponsorOrganisationUserId" value="@Model.SponsorOrganisationUserId" />

            <partial name="_SubmitButton"
                     model="@("sws:projectclosures", "Return to authorisations", new Dictionary<string, string>
                     {
                         ["SponsorOrganisationUserId"] = Model.SponsorOrganisationUserId.ToString()
                     })" />
        </form>
    </div>
</div>