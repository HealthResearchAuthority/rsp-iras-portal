@using Rsp.IrasPortal.Application.Constants
@model Rsp.IrasPortal.Web.Features.SponsorWorkspace.MyOrganisations.Models.SponsorMyOrganisationProfileViewModel;

@{
	var queryDocuments = Context.Request.Query["documents"].ToString();
	bool isNotOnlyApplicant = User.IsInRole(Roles.Sponsor)
					   || User.IsInRole(Roles.StudyWideReviewer)
					   || User.IsInRole(Roles.TeamManager)
					   || User.IsInRole(Roles.SystemAdministrator)
					   || User.IsInRole(Roles.OrganisationAdministrator)
					   || User.IsInRole(Roles.WorkflowCoordinator);

	string activeTabId =
		queryDocuments == ModificationOverview.Documents ? "users-tab" :
		isNotOnlyApplicant ? "profile-tab" : "projects-tab";
}

<!-- Hidden controls -->
<input type="radio"
	   id="tab-profile"
	   role="tab"
	   name="tab-toggle"
	   class="govuk-tab-toggle"
	   aria-label="@MyOrganisationProfileOverview.Profile"
	   @(activeTabId == "profile-tab" ? "checked" : null)>
<input type="radio"
	   id="tab-projects"
	   role="tab"
	   name="tab-toggle"
	   class="govuk-tab-toggle"
	   aria-label="@ModificationOverview.ModificationDetails"
	   @(activeTabId == "projects-tab" ? "checked" : null)>
<input type="radio"
	   id="tab-users"
	   role="tab"
	   name="tab-toggle"
	   class="govuk-tab-toggle"
	   aria-label="@ModificationOverview.Documents"
	   @(activeTabId == "users-tab" ? "checked" : null)>
<input type="radio"
	   id="tab-history"
	   role="tab"
	   name="tab-toggle"
	   class="govuk-tab-toggle"
	   aria-label="@ModificationOverview.History"
	   @(activeTabId == "history-tab" ? "checked" : null)>

<!-- Keep the same GOV.UK Service Navigation look -->
<div class="govuk-service-navigation" aria-hidden="true">
	<div class="govuk-width-container">
		<div class="govuk-service-navigation__container">
			<nav class="govuk-service-navigation__wrapper">
				<ul class="govuk-service-navigation__list">

					<li class="govuk-service-navigation__item small-margin govuk-service-navigation__item--profile">
						<label for="tab-profile" class="govuk-service-navigation__link govuk-service-navigation__link-label">
							@MyOrganisationProfileOverview.Profile
						</label>
					</li>

					<li class="govuk-service-navigation__item small-margin govuk-service-navigation__item--projects">
						<label for="tab-projects" class="govuk-service-navigation__link govuk-service-navigation__link-label">
							@MyOrganisationProfileOverview.Projects
						</label>
					</li>

					<li class="govuk-service-navigation__item small-margin govuk-service-navigation__item--users">
						<label for="tab-users" class="govuk-service-navigation__link govuk-service-navigation__link-label">
                            @MyOrganisationProfileOverview.Users
						</label>
					</li>

					<li class="govuk-service-navigation__item small-margin govuk-service-navigation__item--history">
						<label for="tab-history" class="govuk-service-navigation__link govuk-service-navigation__link-label">
							@MyOrganisationProfileOverview.Audit
						</label>
					</li>
				</ul>
			</nav>
		</div>
	</div>
</div>

<!-- Panels (toggle visibility via CSS) -->
<div id="profile" class="tab-content">
	<partial name="Profile" model="Model" viewData="ViewData" />
</div>

<div id="projects" class="tab-content">
	<partial name="Projects" model="Model" viewData="ViewData" />
</div>

<div id="users" class="tab-content">
	<partial name="Users" model="Model" viewData="ViewData" />
</div>

<div id="history" class="tab-content">
	<partial name="AuditTrail" model="Model" viewData="ViewData" />
</div>