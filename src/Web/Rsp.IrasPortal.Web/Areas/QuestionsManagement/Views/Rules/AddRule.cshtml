@using Rsp.IrasPortal.Web.Areas.QuestionsManagement.Models
@model RuleViewModel

@{
    ViewData["Title"] = "Rules Management";
    var versionId = Context.Request.Query["versionId"].ToString();
    var questionId = Context.Request.Query["questionId"].ToString();

    var rulesRouteData = new Dictionary<string, string> { { "questionId", questionId }, { "versionId", versionId } };

}

@* @section is added for the back button, so that we can render something below the back button
    and before the RenderBody() in the _Layout.cshtml. As RenderBody() renders anything that is not within
    the named section *@
@section BackNavigation {
    <partial name="_BackNavigation" model="@("qm:managerules", "Back", rulesRouteData)" />
}

<div class="govuk-grid-row">

    <partial name="_QuestionsManagementNav" />

    <div class="govuk-grid-column-three-quarters">

        <h1 class="govuk-heading-l">Add Rule</h1>

        <div class="govuk-summary-card govuk-!-margin-top-4">
            <div class="govuk-summary-card__title-wrapper">
                <h2 class="govuk-summary-card__title">@Model.QuestionText</h2>
            </div>
            <div class="govuk-summary-card__content">
                <p><strong>Question Id: </strong>@Model.QuestionId</p>
            </div>
        </div>

        <form asp-action="SaveRule" method="post" class="govuk-form-group">

            <input type="hidden" asp-for="QuestionId" />

            <div class="govuk-form-group" id="conditional-section">
                <label class="govuk-label govuk-label--s" for="ParentQuestionId">Parent Question</label>
                <select class="govuk-select" asp-for="ParentQuestionId" asp-items="Model.ParentQuestions">
                    <option value="">-- Select Parent Question --</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label govuk-label--s" for="Mode">Rule Mode</label>
                <select class="govuk-select" asp-for="Mode">
                    <option value="AND">AND</option>
                    <option value="OR">OR</option>
                </select>
            </div>

            <div class="govuk-form-group">
                <label class="govuk-label govuk-label--s" asp-for="Description">Description</label>
                <input class="govuk-input govuk-!-width-two-thirds" asp-for="Description" />
            </div>

            <div class="govuk-button-group">
                @{
                    ViewBag.Style = "govuk-button govuk-button--secondary";
                }

                <partial name="_SubmitButton" model="@("qmr:saverule", "Save rule", new Dictionary<string, string>())" />
            </div>
        </form>
    </div>
</div>