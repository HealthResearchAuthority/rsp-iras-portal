@using Rsp.IrasPortal.Application.Constants
@using Rsp.IrasPortal.Web.Areas.Admin.Models
@model UserViewModel
@{
	ViewBag.Active = "manageUsers";
}

<a asp-route="admin:users" class="govuk-back-link">Back</a>

<div class="govuk-grid-row">
	<div class="govuk-grid-column-full">
		<h1 class="govuk-heading-l">User profile: @Model.FirstName @Model.LastName</h1>
		<form method="post" id="submit-user-form">
			<table class="govuk-table">
				<thead>
					<tr>
						<th></th>
						<th></th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Title</b></td>
						<td class="govuk-table__cell">
							@Model.Title
							<input type="hidden" asp-for="Title" name="Title" value="@Model.Title" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>First name</b></td>
						<td class="govuk-table__cell">
							@Model.FirstName
							<input type="hidden" asp-for="FirstName" name="FirstName" value="@Model.FirstName" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Last name</b></td>
						<td class="govuk-table__cell">
							@Model.LastName
							<input type="hidden" asp-for="LastName" name="LastName" value="@Model.LastName" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Email address</b></td>
						<td class="govuk-table__cell">
							@Model.Email
							<input type="hidden" asp-for="Email" name="Email" value="@Model.Email" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Telephone</b></td>
						<td class="govuk-table__cell">
							@Model.Telephone
							<input type="hidden" asp-for="Telephone" name="Telephone" value="@Model.Telephone" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Organisation</b></td>
						<td class="govuk-table__cell">
							@Model.Organisation
							<input type="hidden" asp-for="Organisation" name="Organisation" value="@Model.Organisation" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Job title</b></td>
						<td class="govuk-table__cell">
							@Model.JobTitle
							<input type="hidden" asp-for="JobTitle" name="JobTitle" value="@Model.JobTitle" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Role</b></td>
						<td class="govuk-table__cell text-capitalize">
							@Model.Role
							<input type="hidden" asp-for="Role" name="Role" value="@Model.Role" />
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric">
							<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
							   asp-route-email="@Model.Email">Change</a>
						</td>
					</tr>

					@if (Model.Role == "operations" && Model.Country != null && Model.Country.Any())
					{
						<tr class="govuk-table__row">
							<td class="govuk-table__cell"><b>Country</b></td>
							<td class="govuk-table__cell">
								@string.Join(", ", Model.Country)
								@for (int i = 0; i <= Model.Country.Count - 1; i++)
								{
									<input type="hidden" asp-for="Country[@i]" name="Country[@i]" value="@Model.Country[i]" />
								}
							</td>
							<td class="govuk-table__cell govuk-table__cell--numeric">
								<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
								   asp-route-email="@Model.Email">Change</a>
							</td>
						</tr>
					}

					@if (Model.Role == "operations" && Model.AccessRequired != null && Model.AccessRequired.Any())
					{
						<tr class="govuk-table__row">
							<td class="govuk-table__cell"><b>Access Required</b></td>
							<td class="govuk-table__cell">
								@string.Join(", ", Model.AccessRequired)
								@for (int i = 0; i <= Model.AccessRequired.Count - 1; i++)
								{
									<input type="hidden" asp-for="AccessRequired[@i]" name="AccessRequired[@i]" value="@Model.AccessRequired[i]" />
								}
							</td>
							<td class="govuk-table__cell govuk-table__cell--numeric">
								<a class="govuk-link" asp-route="admin:edituser" asp-route-userId="@Model.Id"
								   asp-route-email="@Model.Email">Change</a>
							</td>
						</tr>
					}

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Audit</b></td>
						<td class="govuk-table__cell">
							<a class="govuk-link govuk-link" href="">View this user's audit trail</a>
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric"></td>
					</tr>

					<tr class="govuk-table__row">
						<td class="govuk-table__cell"><b>Last updated</b></td>
						<td class="govuk-table__cell">
							@(Model.LastUpdated.HasValue ? Model.LastUpdated.Value.ToString("dd MMMM yyyy HH:mm") : string.Empty)
						</td>
						<td class="govuk-table__cell govuk-table__cell--numeric"></td>
					</tr>

				</tbody>
			</table>
		</form>			
	</div>
</div>

<div class="govuk-grid-row">
	<div class="govuk-grid-column-two-thirds">
		<h2 class="govuk-heading-m">Do you want to disable this user record?</h2>
		<div class="govuk-hint">
			Disabling a user record will prevent the  administrator from accessing their account.
			This can be reversed once requested.
		</div>
		<form method="post">
			<button type="submit" class="govuk-button govuk-button--secondary" data-module="govuk-button">
				Disable user record
			</button>
		</form>
	</div>
</div>
